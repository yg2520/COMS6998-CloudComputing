<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <script src="aws-cognito-sdk.min.js"></script>
    <script src="amazon-cognito-identity.min.js"></script>
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.16.0.min.js"></script>
    <script src="./app.js"></script>
    <script src="./recog.js"></script>
    <script src="./flotr2.js"></script>

    <title>Rekognition</title>
    <!-- Bootstrap core CSS -->
    <link href="./bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


        <script type="text/javascript" src="lib/aws-sdk.min.js"></script>
        <script type="text/javascript" src="lib/amazon-cognito-identity.min.js"></script>

<script>
        let poolData = {
                    UserPoolId:'',
                    ClientId:''
                };
        var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);
        console.log(userPool)
    </script>


    <style type="text/css">
    body {
  height: 100%;
  background-color: #333;
}
    #image{
              width: 350px;
              height:350px;
              border:1px solid #eee;
          }
    </style>
  </head>

  <body>
  <!-- 
    <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
      <a class="navbar-brand" href="#">Navbar</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item active">
            <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
        </ul>
      </div>
    </nav>
  -->
<div class="container">
  <div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
      <li data-target="#myCarousel" data-slide-to="2"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner">

      <div class="item active">
        <img src="./data/happy_cover.jpg" alt="Happy" style="width:100%; height:400px;">
        <div class="carousel-caption">
          <h3>HAPPY</h3>
          <p>Put Your Hands Up!</p>
        </div>
      </div>

      <div class="item">
        <img src="./data/clam_cover.jpeg" alt="Clam" style="width:100%; height:400px;">
        <div class="carousel-caption">
          <h3>CALM</h3>
          <p>Feel Free and Relief...</p>
        </div>
      </div>
    
      <div class="item">
        <img src="./data/sad_cover.jpg" alt="Sad" style="width:100%; height:400px;">
        <div class="carousel-caption">
          <h3>SAD</h3>
          <p>Good Music to Cheer You Up</p>
        </div>
      </div>
  
    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
</div>


    <br>
    <main role="main" class="container">
    <div class="row">
      <div class="col-sm-4">
        <H1 style="color:white;">Emotion Scorer</H1>
        <div id="image"></div>
        <input type="file" name="fileToUpload" id="fileToUpload" accept="image/*">

      </div>
      <div class="col-sm-3 offset-sm-0.5">
        <H1 style="color:white;" align="center">Analysis</H1>
        <br>
        <div id="chart" style="width: 360px;height: 300px;"></div>
        <!--  <p id="opResult"></p>  -->
        
      </div>
      <div class="col-sm-4 offset-sm-1 blog-sidebar" style="background:#000; color:#FFF">
          <H1 style="color:white;" align="center">Music</H1>
          <div class="sidebar-module">
            <ol class="list-unstyled">
              <br><br>
              <li><div id="music1"></div></li>
              <br>
              <li><div id="music2"></div></li>
              <br>
              <li><div id="music3"></div></li>
            </ol>
          </div>
      </div>
    </div>
    </main>
    
  </body>
  <script>
  document.getElementById("fileToUpload").addEventListener("change", function (event) {
    ProcessImage();
  }, false);
  //col-sm-3 offset-sm-1 blog-sidebar
  </script>




<script>
        $(document).ready(function(){
	if(window.location.href.indexOf("id_token") >= 0){
		var urlParams = new URLSearchParams(window.location.href.split("#")[1]);
		id_token = urlParams.get("id_token");
	}
	else if(window.location.href.indexOf("code") >= 0){ //
		var urlParams = new URLSearchParams(window.location.search);
		code = urlParams.get("code");
		requestbody = "grant_type=authorization_code&client_id= &code=" + code + "&redirect_uri= ";
		$.ajax({
			url:" ",
			method:"POST",
			header: {
				'Content-Type': 'application/x-www-form-urlencoded'
			},
			data: requestbody,

			success:function(data){
				access_token = data['access_token'];
				id_token = data['id_token'];
				refresh_token = data['refresh_token'];
                      //?????
				
			}
//???token???????IAM???
//??API???????header? header Authorization:
		});
	}
	else{ // Not signed in
		window.location.href = "  ";
	}
});
console.log(access_token)
console.log(id_token)
</script>

</html>